import{r as e,aD as r,j as t}from"./react-vendor-CR6RrKUZ.js";import{c as s}from"../index-CcpmsZOi.js";function a({src:a,srcSet:i,sizes:n,alt:l,width:o,height:c,className:d,placeholderSrc:u,loading:m="lazy",priority:h=!1,onLoad:f,onError:g}){const[v,p]=e.useState(!1),[x,j]=e.useState(!1),y=e.useRef(null),{ref:w,inView:E}=r({triggerOnce:!0,threshold:.01,rootMargin:"50px"}),L=h||E||"eager"===m;return e.useEffect(()=>{if(!L||!y.current)return;const e=y.current,r=()=>{p(!0),null==f||f()},t=()=>{j(!0),null==g||g()};return e.complete&&e.naturalWidth?r():(e.addEventListener("load",r),e.addEventListener("error",t)),()=>{e.removeEventListener("load",r),e.removeEventListener("error",t)}},[L,f,g]),t.jsxs("div",{ref:w,className:s("relative overflow-hidden",d),style:{width:o,height:c},children:[u&&!v&&t.jsx("img",{src:u,alt:"",className:"absolute inset-0 w-full h-full object-cover filter blur-sm scale-110","aria-hidden":"true"}),L&&t.jsx("img",{ref:y,src:a,srcSet:i,sizes:n,alt:l,width:o,height:c,loading:h?"eager":"lazy",decoding:h?"sync":"async",className:s("transition-opacity duration-300",v?"opacity-100":"opacity-0",x&&"hidden")}),x&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:t.jsx("span",{className:"text-muted-foreground text-sm",children:"Failed to load image"})})]})}export{a as L};
